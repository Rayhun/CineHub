{% extends "base.html" %}

{% block title %}CineHub Plans{% endblock %}

{% block content %}
  <!-- Pricing Plans -->
  <section class="pricing-section">
    <div class="container">
      <div class="row g-4">
        {% for plan in plans %}
          <div class="col">
            <div class="pricing-card {% if plan.is_recommended %}featured{% endif %}">
              {% if plan.badge_text %}
                <div class="pricing-badge">{{ plan.badge_text }}</div>
              {% endif %}
              <div class="pricing-header">
                <h3>{{ plan.title }}</h3>
                {% if plan.subtitle %}
                  <p class="pricing-desc">{{ plan.subtitle }}</p>
                {% endif %}
              </div>
              <div class="pricing-price">
                <span class="currency">{{ plan.currency }}</span>
                <span class="amount">{{ plan.price|floatformat:2 }}</span>
                <span class="period">{{ plan.billing_period }}</span>
              </div>
              <ul class="pricing-features">
                {% for assignment in plan.feature_assignments.all %}
                  <li>
                    {% if assignment.is_included %}
                      <i class="fas fa-check text-success"></i>
                    {% else %}
                      <i class="fas fa-times text-muted"></i>
                    {% endif %}
                    {{ assignment.feature.name }}
                  </li>
                {% empty %}
                  <li><i class="fas fa-info-circle text-secondary"></i> Feature list coming soon.</li>
                {% endfor %}
              </ul>
              <button class="btn {% if plan.is_recommended %}btn-danger{% else %}btn-outline-danger{% endif %} w-100">
                {{ plan.button_text }}
              </button>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <div class="alert alert-info text-center">
              Subscription plans are not available yet. Please check back later.
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Features Comparison -->
  <section class="comparison-section">
    <div class="container">
      <h2 class="section-title">Plan Comparison</h2>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Features</th>
              <th>Basic</th>
              <th>Standard</th>
              <th>Premium Plus</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Video Quality</td>
              <td>720p HD</td>
              <td>1080p Full HD</td>
              <td>4K Ultra HD</td>
            </tr>
            <tr>
              <td>Simultaneous Devices</td>
              <td>1</td>
              <td>2</td>
              <td>4</td>
            </tr>
            <tr>
              <td>Advertisements</td>
              <td>Yes</td>
              <td>No</td>
              <td>No</td>
            </tr>
            <tr>
              <td>Offline Downloads</td>
              <td>No</td>
              <td>Yes</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td>Download Limit</td>
              <td>-</td>
              <td>50 titles</td>
              <td>Unlimited</td>
            </tr>
            <tr>
              <td>Early Access</td>
              <td>No</td>
              <td>No</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td>Priority Support</td>
              <td>No</td>
              <td>No</td>
              <td>Yes</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="container">
      <h2 class="section-title">Frequently Asked Questions</h2>
      <div class="accordion" id="faqAccordion">
        {% for faq in faqs %}
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button {% if not forloop.first %}collapsed{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#faq{{ forloop.counter }}">
                {{ faq.question }}
              </button>
            </h2>
            <div id="faq{{ forloop.counter }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                {{ faq.answer }}
              </div>
            </div>
          </div>
        {% empty %}
          <div class="text-center text-muted">No frequently asked questions yet.</div>
        {% endfor %}
      </div>
    </div>
  </section>

  {% endblock %}
  
